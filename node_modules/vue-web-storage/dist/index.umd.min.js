!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("VueWebStorage",[],t):"object"==typeof exports?exports.VueWebStorage=t():e.VueWebStorage=t()}(self,(function(){return(()=>{"use strict";var e={592:(e,t,r)=>{r.r(t),r.d(t,{StorageWithEvents:()=>f,VueWebStoragePlugin:()=>a,WebStorage:()=>n,default:()=>c});var o=function(e){return null===e?e:JSON.parse(e)};const n=function(){function e(e,t){void 0===e&&(e="app_"),void 0===t&&(t="local"),this.prefix=e,this.storage=this.resolveDriver(t)}return e.prototype.prefixKey=function(e){return this.prefix+String(e)},e.prototype.set=function(e,t){return this.storage.setItem(this.prefixKey(e),JSON.stringify(t))},e.prototype.get=function(e,t){void 0===t&&(t=null);var r=null,n=this.storage.getItem(this.prefixKey(e));return n&&(r=o(n)),null===r?t:r},e.prototype.remove=function(e){return this.storage.removeItem(this.prefixKey(e))},e.prototype.clear=function(e){var t=this;void 0===e&&(e=!1),e?this.storage.clear():this.keys(!0).map((function(e){t.storage.removeItem(e)}))},e.prototype.keys=function(e){var t=this;void 0===e&&(e=!1);var r=[];return Object.keys(this.storage).forEach((function(o){o.substr(0,t.prefix.length)===t.prefix&&r.push(e?o:o.substring(t.prefix.length))})),r},e.prototype.hasKey=function(e){return-1!==this.keys().indexOf(e)},e.prototype.length=function(){return this.keys().length},e.prototype.resolveDriver=function(e){switch(e){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error("Unknown driver supplied: "+e)}},e}();var i={};const s=function(){function e(){window.addEventListener("storage",this.onChange,!1)}return e.prototype.onChange=function(e){var t=this;if(e.key){var r=i[e.key];if(r){var n=o(e.newValue),s=o(e.oldValue);r.map((function(r){r.call(t,n,s,e.url)}))}}},e.prototype.on=function(e,t){i[e]?i[e].push(t):i[e]=[t]},e.prototype.off=function(e,t){var r=i[e];r&&r.length>1?r.splice(r.indexOf(t),1):delete i[e]},e.prototype.clear=function(e){e?delete i[e]:i={}},e.prototype.listeners=function(){return i},e}();var p,u=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const f=function(e){function t(t,r){void 0===t&&(t="app_"),void 0===r&&(r="local");var o=e.call(this,t,r)||this;return o.events=new s,o}return u(t,e),t.prototype.on=function(e,t){return this.events.on(this.prefixKey(e),t),this},t.prototype.off=function(e,t){return this.events.off(this.prefixKey(e),t),this},t.prototype.clearEvents=function(e){var t=!!e&&this.prefixKey(e);return this.events.clear(t),this},t}(n);const a=function(e,t){void 0===t&&(t={});var r,o=Object.assign({},{prefix:"app_",drivers:"local"},t);(r=o.drivers,r instanceof Array?r:[r]).map((function(t){!function(e,t,r){var o=new f(r,t),n="$"+String(t)+"Storage";e.config.globalProperties[n]=o,e.provide(n,o)}(e,t,o.prefix)}))},c=a}},t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}return r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(592)})()}));