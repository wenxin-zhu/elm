{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4b6b7b1f\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"wrapper\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"header\", null, [/*#__PURE__*/_createElementVNode(\"p\", null, \"确认订单\")], -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"order-info\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h5\", null, \"订单配送至\", -1 /* HOISTED */));\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"order-info-address\"\n}, [/*#__PURE__*/_createElementVNode(\"p\", null, \"沈阳市浑南区智慧四街1-121号\"), /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-angle-right\"\n})], -1 /* HOISTED */));\nconst _hoisted_6 = {\n  class: \"order-detailed\"\n};\nconst _hoisted_7 = {\n  class: \"order-detailed-left\"\n};\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = {\n  class: \"order-deliveryfee\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"配送费\", -1 /* HOISTED */));\nconst _hoisted_11 = {\n  class: \"total\"\n};\nconst _hoisted_12 = {\n  class: \"total-left\"\n};\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"total-right\",\n  onclick: \"location.href='payment.html'\"\n}, \" 去支付 \", -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\"header部分\"), _hoisted_2, _createCommentVNode(\"订单信息部分\"), _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _hoisted_5, _createElementVNode(\"p\", null, _toDisplayString($setup.user.userName) + _toDisplayString($setup.formatSex($setup.user.userSex)) + \" \" + _toDisplayString($setup.user.userId), 1 /* TEXT */)]), _createElementVNode(\"h3\", null, _toDisplayString($setup.business.businessName), 1 /* TEXT */), _createCommentVNode(\"订单明细部分\"), _createElementVNode(\"ul\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.cartArr, item => {\n    return _openBlock(), _createElementBlock(\"li\", null, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"img\", {\n      src: item.food.foodImg\n    }, null, 8 /* PROPS */, _hoisted_8), _createElementVNode(\"p\", null, _toDisplayString(item.food.foodName) + \" x \" + _toDisplayString(item.quantity), 1 /* TEXT */)]), _createElementVNode(\"p\", null, \"¥\" + _toDisplayString(item.food.foodPrice * item.quantity), 1 /* TEXT */)]);\n  }), 256 /* UNKEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createElementVNode(\"p\", null, \"¥\" + _toDisplayString($setup.business.deliveryPrice), 1 /* TEXT */)]), _createCommentVNode(\"合计部分\"), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, \" ¥\" + _toDisplayString($setup.totalPrice), 1 /* TEXT */), _hoisted_13])]);\n}","map":{"version":3,"names":["class","_createElementVNode","onclick","_createElementBlock","_hoisted_1","_createCommentVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","$setup","user","userName","formatSex","userSex","userId","business","businessName","_hoisted_6","_Fragment","_renderList","cartArr","item","_hoisted_7","src","food","foodImg","foodName","quantity","foodPrice","_hoisted_9","_hoisted_10","deliveryPrice","_hoisted_11","_hoisted_12","totalPrice","_hoisted_13"],"sources":["F:\\myvue1\\elmclient\\elmclient\\src\\views\\Orders.vue"],"sourcesContent":["<template>\r\n\t<div class=\"wrapper\">\r\n\t\t<!--header部分-->\r\n\t\t<header>\r\n\t\t\t<p>确认订单</p>\r\n\t\t</header>\r\n\t\t\r\n\t\t<!--订单信息部分-->\r\n\t\t<div class = \"order-info\">\r\n\t\t\t<h5>订单配送至</h5>\r\n\t\t\t<div class = \"order-info-address\">\r\n\t\t\t\t<p>沈阳市浑南区智慧四街1-121号</p>\r\n\t\t\t\t<i class=\"fa fa-angle-right\"></i>\r\n\t\t\t</div>\r\n\t\t\t<p>{{user.userName}}{{formatSex(user.userSex)}} {{user.userId}}</p>\r\n\t\t</div>\r\n\t\t\r\n\t\t<h3>{{business.businessName}}</h3>\r\n\t\t\r\n\t\t<!--订单明细部分-->\r\n\t\t<ul class=\"order-detailed\">\r\n\t\t\t<li v-for=\"item in cartArr\">\r\n\t\t\t\t<div class=\"order-detailed-left\">\r\n\t\t\t\t\t<img :src=\"item.food.foodImg\">\r\n\t\t\t\t\t<p>{{item.food.foodName}} x {{item.quantity}}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>&#165;{{item.food.foodPrice*item.quantity}}</p>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t\t<div class=\"order-deliveryfee\">\r\n\t\t\t<p>配送费</p>\r\n\t\t\t<p>&#165;{{business.deliveryPrice}}</p>\r\n\t\t</div>\r\n\t\t\r\n\t\t<!--合计部分-->\r\n\t\t<div class=\"total\">\r\n\t\t    <div class=\"total-left\">\r\n\t\t        &#165;{{totalPrice}}\r\n\t\t    </div>\r\n\t\t    <div class=\"total-right\" onclick=\"location.href='payment.html'\">\r\n\t\t        去支付\r\n\t\t    </div>\r\n\t\t</div>\r\n\t</div>\n</template>\n\n<script>\r\n\timport {\r\n\t\tref,\r\n\t\tonMounted,\r\n\t\tcomputed\r\n\t} from 'vue';\r\n\timport axios from 'axios';\r\n\timport qs from 'qs';\r\n\t\r\n\texport default{\r\n\t\tname: 'Orders',\r\n\t\tsetup(){\r\n\t\t\tconst businessId = ref(null);\r\n\t\t\tconst business = ref({});\r\n\t\t\tconst user = ref(null);\r\n\t\t\tconst cartArr = ref([]);\r\n\t\t\t\r\n\t\t\t//查询当前商家\r\n\t\t\tconst fetchBusinessInfo = () => {\r\n\t\t\t\taxios\r\n\t\t\t\t\t.post('BusinessController/getBusinessById', qs.stringify({\r\n\t\t\t\t\t\tbusinessId: businessId.value\r\n\t\t\t\t\t}))\r\n\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\tbusiness.value = response.data;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t//查询当前用户在购物车中的当前商家食品列表\r\n\t\t\tconst fetchFoodInfo = () => {\r\n\t\t\t\taxios\r\n\t\t\t\t\t.post('CartController/listCart', qs.stringify({\r\n\t\t\t\t\t\tuserId: user.value.userId,\r\n\t\t\t\t\t\tbusinessId: businessId.value\r\n\t\t\t\t\t}))\r\n\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\tcartArr.value = response.data;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tconst totalPrice = computed(() => {\r\n\t\t\t    let total = 0;\r\n\t\t\t    for (let item of cartArr.value) {\r\n\t\t\t        total += item.food.foodPrice * item.quantity;\r\n\t\t\t    }\r\n\t\t\t\ttotal += business.deliveryPrice;\r\n\t\t\t    return total;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tconst formatSex = (value) => {\r\n\t\t\t    return value == 1 ? '先生' : '女士';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tonMounted(() => {\r\n\t\t\t    user.value = JSON.parse(sessionStorage.getItem('user'));\r\n\t\t\t\tfetchBusinessInfo(); \r\n\t\t\t\tfetchFoodInfo(); \r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn{\r\n\t\t\t\tbusinessId,\r\n\t\t\t\tbusiness,\r\n\t\t\t\tuser,\r\n\t\t\t\tcartArr,\r\n\t\t\t\ttotalPrice,\r\n\t\t\t\tfetchBusinessInfo,\r\n\t\t\t\tfetchFoodInfo,\r\n\t\t\t\tformatSex\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped>\r\n\t/****************** 总容器 ******************/\r\n\t.wrapper{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t/****************** header部分 ******************/\r\n\t.wrapper header{\r\n\t\twidth: 100%;\r\n\t\theight: 12vw;\r\n\t\tbackground-color: #0097FF;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.8vw;\r\n\t\t\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tz-index: 1000;\r\n\t\t\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t/****************** 订单信息部分 ******************/\r\n\t.wrapper .order-info{\r\n\t\tcolor: white;\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 12vw;\r\n\t\tbackground-color: #0097FF;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 2vw;\r\n\t}\r\n\t\r\n\t.wrapper .order-info .h5{\r\n\t\tfont-size: 3vw;\r\n\t\tfont-weight: 300;\r\n\t}\r\n\t\r\n\t.wrapper .order-info .order-info-address{\r\n\t\twidth: 100%;\r\n\t\tfont-weight: 700;\r\n\t\t\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tuser-select: none;\r\n\t\tcursor: pointer;\r\n\t\tmargin: 1vw 0; /*中间一行的上下 左右间距*/\r\n\t}\r\n\t\r\n\t.wrapper .order-info .order-info-address p{\r\n\t\twidth: 90%; /*避免地址过长时换行太靠后*/\r\n\t\tfont-size: 5vw;\r\n\t}\r\n\t\r\n\t.wrapper .order-info .order-info-address i{\r\n\t\tfont-size: 6vw;\r\n\t}\r\n\t\r\n\t.wrapper .order-info p{\r\n\t\tfont-size: 3vw;\r\n\t}\r\n\t\r\n\t.wrapper h3{\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 3vw;\r\n\t\tfont-size: 4vw;\r\n\t\tcolor: #666;\r\n\t\tborder-bottom: solid 1px #DDD;\r\n\t}\r\n\t\r\n\t/****************** 订单明细部分 ******************/\r\n\t.wrapper .order-detailed{\r\n\t\twidth: 100%;\r\n\t}\r\n\t\r\n\t.wrapper .order-detailed li{\r\n\t\twidth: 100%;\r\n\t\theight: 16vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 3vw;\r\n\t\tcolor: #666;\r\n\t\t\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.wrapper .order-detailed li .order-detailed-left{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.wrapper .order-detailed li .order-detailed-left img{\r\n\t\twidth: 10vw;\r\n\t\theight: 10vw;\r\n\t}\r\n\t\r\n\t.wrapper .order-detailed li .order-detailed-left p{\r\n\t    font-size: 3.5vw;\r\n\t    margin-left: 3vw;\r\n\t}\r\n\t\r\n\t.wrapper .order-detailed li p{\r\n\t    font-size: 3.5vw;\r\n\t}\r\n\t\r\n\t.wrapper .order-deliveryfee{\r\n\t\twidth: 100%;\r\n\t\theight: 16vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 3vw;\r\n\t\tcolor: #666;\r\n\t\t\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tfont-size: 3.5vw;\r\n\t}\r\n\t\r\n\t/****************** 订单合计部分 ******************/\r\n\t.wrapper .total{\r\n\t\twidth: 100%;\r\n\t\theight: 14vw;\r\n\t\t\r\n\t\tposition: fixed;/*固定到底部*/\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\t\r\n\t\tdisplay: flex;\r\n\t\t\r\n\t}\r\n\t\r\n\t.wrapper .total .total-left{\r\n\t\tflex: 2;\r\n\t\tbackground-color: #505051;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.5vw;\r\n\t\tfont-weight: 700;\r\n\t\tuser-select: none;\r\n\t\t\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.wrapper .total .total-right{\r\n\t\tflex: 1;\r\n\t\tbackground-color: #38CA73;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.5vw;\r\n\t\tfont-weight: 700;\r\n\t\tuser-select: none;\r\n\t\tcursor: pointer;\r\n\t\t\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\n</style>"],"mappings":";;;EACMA,KAAK,EAAC;AAAS;gEAEnBC,mBAAA,CAES,iB,aADRA,mBAAA,CAAW,WAAR,MAAI,E;;EAIHD,KAAK,EAAG;AAAY;gEACxBC,mBAAA,CAAc,YAAV,OAAK;gEACTA,mBAAA,CAGM;EAHDD,KAAK,EAAG;AAAoB,I,aAChCC,mBAAA,CAAuB,WAApB,kBAAgB,G,aACnBA,mBAAA,CAAiC;EAA9BD,KAAK,EAAC;AAAmB,G;;EAQ1BA,KAAK,EAAC;AAAgB;;EAEnBA,KAAK,EAAC;AAAqB;;;EAO7BA,KAAK,EAAC;AAAmB;iEAC7BC,mBAAA,CAAU,WAAP,KAAG;;EAKFD,KAAK,EAAC;AAAO;;EACTA,KAAK,EAAC;AAAY;iEAGvBC,mBAAA,CAEM;EAFDD,KAAK,EAAC,aAAa;EAACE,OAAO,EAAC;GAA+B,OAEhE;;;uBAxCLC,mBAAA,CA0CM,OA1CNC,UA0CM,GAzCLC,mBAAA,YAAe,EACfC,UAES,EAETD,mBAAA,UAAa,EACbJ,mBAAA,CAOM,OAPNM,UAOM,GANLC,UAAc,EACdC,UAGM,EACNR,mBAAA,CAAmE,WAAAS,gBAAA,CAA9DC,MAAA,CAAAC,IAAI,CAACC,QAAQ,IAAAH,gBAAA,CAAIC,MAAA,CAAAG,SAAS,CAACH,MAAA,CAAAC,IAAI,CAACG,OAAO,KAAG,GAAC,GAAAL,gBAAA,CAAEC,MAAA,CAAAC,IAAI,CAACI,MAAM,iB,GAG9Df,mBAAA,CAAkC,YAAAS,gBAAA,CAA5BC,MAAA,CAAAM,QAAQ,CAACC,YAAY,kBAE3Bb,mBAAA,UAAa,EACbJ,mBAAA,CAQK,MARLkB,UAQK,I,kBAPJhB,mBAAA,CAMKiB,SAAA,QAAAC,WAAA,CANcV,MAAA,CAAAW,OAAO,EAAfC,IAAI;yBAAfpB,mBAAA,CAMK,aALJF,mBAAA,CAGM,OAHNuB,UAGM,GAFLvB,mBAAA,CAA8B;MAAxBwB,GAAG,EAAEF,IAAI,CAACG,IAAI,CAACC;yCACrB1B,mBAAA,CAAiD,WAAAS,gBAAA,CAA5Ca,IAAI,CAACG,IAAI,CAACE,QAAQ,IAAE,KAAG,GAAAlB,gBAAA,CAAEa,IAAI,CAACM,QAAQ,iB,GAE5C5B,mBAAA,CAAkD,WAA/C,GAAM,GAAAS,gBAAA,CAAEa,IAAI,CAACG,IAAI,CAACI,SAAS,GAACP,IAAI,CAACM,QAAQ,iB;sCAG9C5B,mBAAA,CAGM,OAHN8B,UAGM,GAFLC,WAAU,EACV/B,mBAAA,CAAuC,WAApC,GAAM,GAAAS,gBAAA,CAAEC,MAAA,CAAAM,QAAQ,CAACgB,aAAa,iB,GAGlC5B,mBAAA,QAAW,EACXJ,mBAAA,CAOM,OAPNiC,WAOM,GANFjC,mBAAA,CAEM,OAFNkC,WAEM,EAFkB,IACd,GAAAzB,gBAAA,CAAEC,MAAA,CAAAyB,UAAU,kBAEtBC,WAEM,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}