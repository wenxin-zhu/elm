{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport Footer from '../components/Footer.vue';\nimport axios from 'axios';\nimport qs from 'qs';\nexport default {\n  name: 'OrderList',\n  components: {\n    Footer\n  },\n  setup() {\n    const orderArr = ref([]);\n    const user = ref({});\n    const getSessionStorage = () => {\n      const storedUser = sessionStorage.getItem('user');\n      return storedUser ? JSON.parse(storedUser) : null;\n    };\n    const fetchOrders = async () => {\n      user.value = getSessionStorage();\n      try {\n        const response = await axios.post('OrdersController/listOrdersByUserId', qs.stringify({\n          userId: user.value.userId\n        }));\n        orderArr.value = response.data;\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    onMounted(fetchOrders);\n    return {\n      orderArr,\n      user\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","Footer","axios","qs","name","components","setup","orderArr","user","getSessionStorage","storedUser","sessionStorage","getItem","JSON","parse","fetchOrders","value","response","post","stringify","userId","data","error","console"],"sources":["F:\\myvue1\\elmclient\\elmclient\\src\\views\\OrderList.vue"],"sourcesContent":["<template>\r\n\t<div class=\"wrapper\">\r\n\r\n\t\t<!--header部分-->\r\n\t\t<header>\r\n\t\t\t<p>我的订单</p>\r\n\t\t</header>\r\n\r\n\t\t<!-- 订单列表部分 -->\r\n\t\t<h3>未支付订单信息：</h3>\r\n\t\t<ul class=\"order\">\r\n\t\t\t<li v-for = \"item in orderArr.value\" v-if=\"(item &&item.orderState === 0)\">\r\n\t\t\t\t<div class=\"order-info\">\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{{item.business.businessName}}\r\n\t\t\t\t\t\t<i class=\"fa fa-caret-down\"></i>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<div class=\"order-info-right\">\r\n\t\t\t\t\t\t<p>&#165;{{item.orderTotal}}</p>\r\n\t\t\t\t\t\t<div class=\"order-info-right-icon\">\r\n\t\t\t\t\t\t\t去支付\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul class=\"order-detailet\">\r\n\t\t\t\t\t<li v-for = \"odItem in item.list\">\r\n\t\t\t\t\t\t<p>{{odItem.food.foodName}} x {{odItem.quantity}}</p>\r\n\t\t\t\t\t\t<p>&#165;{{odItem.food.foodPrice*odItem.quantity}}</p>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<p>配送费</p>\r\n\t\t\t\t\t\t<p>&#165;{{item.business.deliveryPrice}}</p>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</li>\r\n\t\r\n\t\t</ul>\r\n\r\n\t\t<h3>已支付订单信息：</h3>\r\n\t\t<ul class=\"order\">\r\n\t\t\t<li v-for = \"item in orderArr.value\" v-if=\"(item &&item.orderState == 1)\">\r\n\t\t\t\t<div class=\"order-info\">\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{{item.business.businessName}}\r\n\t\t\t\t\t\t<i class=\"fa fa-caret-down\"></i>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<div class=\"order-info-right\">\r\n\t\t\t\t\t\t<p>&#165;{{item.orderTotal}}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul class=\"order-detailet\">\r\n\t\t\t\t\t<li v-for = \"odItem in item.list\">\r\n\t\t\t\t\t\t<p>{{odItem.food.foodName}} x {{odItem.quantity}}</p>\r\n\t\t\t\t\t\t<p>&#165;{{odItem.food.foodPrice*odItem.quantity}}</p>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<p>配送费</p>\r\n\t\t\t\t\t\t<p>&#165;{{item.business.deliveryPrice}}</p>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\r\n\r\n\t\t<!-- 底部菜单部分 -->\r\n\t    <Footer></Footer>\r\n\t</div>\r\n</template>\r\n\r\n<script>\nimport { ref, onMounted } from 'vue';\nimport Footer from '../components/Footer.vue';\nimport axios from 'axios';\nimport qs from 'qs';\n\nexport default {\n  name: 'OrderList',\n  components: {\n    Footer\n  },\n  setup() {\n    const orderArr = ref([]);\n    const user = ref({});\n\n    const getSessionStorage = () => {\n      const storedUser = sessionStorage.getItem('user');\n      return storedUser ? JSON.parse(storedUser) : null;\n    };\n\tconst fetchOrders = async () => {\n\tuser.value = getSessionStorage();\n\n\ttry {\n\t\tconst response = await axios.post('OrdersController/listOrdersByUserId', qs.stringify({\n\t\tuserId: user.value.userId\n\t\t}));\n\n\t\torderArr.value = response.data;\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n};\n\n    onMounted(fetchOrders);\n\n    return {\n      orderArr,\n      user\n    };\n  }\n};\n</script>\r\n<style scoped>\r\n\t/****************** 总容器 ******************/\r\n\t.wrapper {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/****************** header部分 ******************/\r\n\t.wrapper header {\r\n\t\twidth: 100%;\r\n\t\theight: 12vw;\r\n\t\tbackground-color: #0097FF;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.8vw;\r\n\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tz-index: 1000;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/****************** 历史订单列表部分 ******************/\r\n\t.wrapper h3 {\r\n\t\tmargin-top: 12vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 4vw;\r\n\t\tfont-size: 4vw;\r\n\t\tfont-weight: 300;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.wrapper .order {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.wrapper .order li {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.wrapper .order li .order-info {\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 2vw 4vw;\r\n\t\tfont-size: 4vw;\r\n\t\tcolor: #666;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .order li .order-info .order-info-right {\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.wrapper .order li .order-info .order-info-right .order-info-right-icon {\r\n\t\tbackground-color: #f90;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 3px;\r\n\t\tuser-select: none;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.wrapper li .order-detailet {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.wrapper li .order-detailet li {\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 1vw 4vw;\r\n\t\tcolor: #666;\r\n\t\tfont-size: 3vw;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/****************** 底部菜单部分 ******************/\r\n\t</style>"],"mappings":"AAsEA,SAASA,GAAG,EAAEC,SAAQ,QAAS,KAAK;AACpC,OAAOC,MAAK,MAAO,0BAA0B;AAC7C,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,EAAC,MAAO,IAAI;AAEnB,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,UAAU,EAAE;IACVJ;EACF,CAAC;EACDK,KAAKA,CAAA,EAAG;IACN,MAAMC,QAAO,GAAIR,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMS,IAAG,GAAIT,GAAG,CAAC,CAAC,CAAC,CAAC;IAEpB,MAAMU,iBAAgB,GAAIA,CAAA,KAAM;MAC9B,MAAMC,UAAS,GAAIC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC;MACjD,OAAOF,UAAS,GAAIG,IAAI,CAACC,KAAK,CAACJ,UAAU,IAAI,IAAI;IACnD,CAAC;IACJ,MAAMK,WAAU,GAAI,MAAAA,CAAA,KAAY;MAChCP,IAAI,CAACQ,KAAI,GAAIP,iBAAiB,CAAC,CAAC;MAEhC,IAAI;QACH,MAAMQ,QAAO,GAAI,MAAMf,KAAK,CAACgB,IAAI,CAAC,qCAAqC,EAAEf,EAAE,CAACgB,SAAS,CAAC;UACtFC,MAAM,EAAEZ,IAAI,CAACQ,KAAK,CAACI;QACnB,CAAC,CAAC,CAAC;QAEHb,QAAQ,CAACS,KAAI,GAAIC,QAAQ,CAACI,IAAI;MAC/B,EAAE,OAAOC,KAAK,EAAE;QACfC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACrB;IACD,CAAC;IAEGtB,SAAS,CAACe,WAAW,CAAC;IAEtB,OAAO;MACLR,QAAQ;MACRC;IACF,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}