{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { parseJSON } from './util';\nvar listeners = {};\nvar Events = /** @class */function () {\n  function Events() {\n    window.addEventListener('storage', this.onChange, false);\n  }\n  Events.prototype.onChange = function (event) {\n    var _this = this;\n    // According to specs the key can be `null`\n    if (!event.key) return;\n    // Notice: `this` refers to `window` inside this method\n    var methods = listeners[event.key];\n    /*istanbul ignore else*/\n    if (methods) {\n      var newValue_1 = parseJSON(event.newValue);\n      var oldValue_1 = parseJSON(event.oldValue);\n      methods.map(function (method) {\n        method.call(_this, newValue_1, oldValue_1, event.url);\n      });\n    }\n  };\n  Events.prototype.on = function (key, fn) {\n    if (listeners[key]) {\n      listeners[key].push(fn);\n    } else {\n      listeners[key] = [fn];\n    }\n  };\n  Events.prototype.off = function (key, fn) {\n    var methods = listeners[key];\n    if (methods && methods.length > 1) {\n      methods.splice(methods.indexOf(fn), 1);\n    } else {\n      delete listeners[key];\n    }\n  };\n  Events.prototype.clear = function (key) {\n    if (key) {\n      delete listeners[key];\n    } else {\n      listeners = {};\n    }\n  };\n  Events.prototype.listeners = function () {\n    return listeners;\n  };\n  return Events;\n}();\nexport default Events;","map":{"version":3,"names":["parseJSON","listeners","Events","window","addEventListener","onChange","prototype","event","_this","key","methods","newValue_1","newValue","oldValue_1","oldValue","map","method","call","url","on","fn","push","off","length","splice","indexOf","clear"],"sources":["F:/myvue1/elmclient/elmclient/node_modules/vue-web-storage/dist/esm/events.js"],"sourcesContent":["import { parseJSON } from './util';\nvar listeners = {};\nvar Events = /** @class */ (function () {\n    function Events() {\n        window.addEventListener('storage', this.onChange, false);\n    }\n    Events.prototype.onChange = function (event) {\n        var _this = this;\n        // According to specs the key can be `null`\n        if (!event.key)\n            return;\n        // Notice: `this` refers to `window` inside this method\n        var methods = listeners[event.key];\n        /*istanbul ignore else*/\n        if (methods) {\n            var newValue_1 = parseJSON(event.newValue);\n            var oldValue_1 = parseJSON(event.oldValue);\n            methods.map(function (method) {\n                method.call(_this, newValue_1, oldValue_1, event.url);\n            });\n        }\n    };\n    Events.prototype.on = function (key, fn) {\n        if (listeners[key]) {\n            listeners[key].push(fn);\n        }\n        else {\n            listeners[key] = [fn];\n        }\n    };\n    Events.prototype.off = function (key, fn) {\n        var methods = listeners[key];\n        if (methods && methods.length > 1) {\n            methods.splice(methods.indexOf(fn), 1);\n        }\n        else {\n            delete listeners[key];\n        }\n    };\n    Events.prototype.clear = function (key) {\n        if (key) {\n            delete listeners[key];\n        }\n        else {\n            listeners = {};\n        }\n    };\n    Events.prototype.listeners = function () {\n        return listeners;\n    };\n    return Events;\n}());\nexport default Events;\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,QAAQ;AAClC,IAAIC,SAAS,GAAG,CAAC,CAAC;AAClB,IAAIC,MAAM,GAAG,aAAe,YAAY;EACpC,SAASA,MAAMA,CAAA,EAAG;IACdC,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACC,QAAQ,EAAE,KAAK,CAAC;EAC5D;EACAH,MAAM,CAACI,SAAS,CAACD,QAAQ,GAAG,UAAUE,KAAK,EAAE;IACzC,IAAIC,KAAK,GAAG,IAAI;IAChB;IACA,IAAI,CAACD,KAAK,CAACE,GAAG,EACV;IACJ;IACA,IAAIC,OAAO,GAAGT,SAAS,CAACM,KAAK,CAACE,GAAG,CAAC;IAClC;IACA,IAAIC,OAAO,EAAE;MACT,IAAIC,UAAU,GAAGX,SAAS,CAACO,KAAK,CAACK,QAAQ,CAAC;MAC1C,IAAIC,UAAU,GAAGb,SAAS,CAACO,KAAK,CAACO,QAAQ,CAAC;MAC1CJ,OAAO,CAACK,GAAG,CAAC,UAAUC,MAAM,EAAE;QAC1BA,MAAM,CAACC,IAAI,CAACT,KAAK,EAAEG,UAAU,EAAEE,UAAU,EAAEN,KAAK,CAACW,GAAG,CAAC;MACzD,CAAC,CAAC;IACN;EACJ,CAAC;EACDhB,MAAM,CAACI,SAAS,CAACa,EAAE,GAAG,UAAUV,GAAG,EAAEW,EAAE,EAAE;IACrC,IAAInB,SAAS,CAACQ,GAAG,CAAC,EAAE;MAChBR,SAAS,CAACQ,GAAG,CAAC,CAACY,IAAI,CAACD,EAAE,CAAC;IAC3B,CAAC,MACI;MACDnB,SAAS,CAACQ,GAAG,CAAC,GAAG,CAACW,EAAE,CAAC;IACzB;EACJ,CAAC;EACDlB,MAAM,CAACI,SAAS,CAACgB,GAAG,GAAG,UAAUb,GAAG,EAAEW,EAAE,EAAE;IACtC,IAAIV,OAAO,GAAGT,SAAS,CAACQ,GAAG,CAAC;IAC5B,IAAIC,OAAO,IAAIA,OAAO,CAACa,MAAM,GAAG,CAAC,EAAE;MAC/Bb,OAAO,CAACc,MAAM,CAACd,OAAO,CAACe,OAAO,CAACL,EAAE,CAAC,EAAE,CAAC,CAAC;IAC1C,CAAC,MACI;MACD,OAAOnB,SAAS,CAACQ,GAAG,CAAC;IACzB;EACJ,CAAC;EACDP,MAAM,CAACI,SAAS,CAACoB,KAAK,GAAG,UAAUjB,GAAG,EAAE;IACpC,IAAIA,GAAG,EAAE;MACL,OAAOR,SAAS,CAACQ,GAAG,CAAC;IACzB,CAAC,MACI;MACDR,SAAS,GAAG,CAAC,CAAC;IAClB;EACJ,CAAC;EACDC,MAAM,CAACI,SAAS,CAACL,SAAS,GAAG,YAAY;IACrC,OAAOA,SAAS;EACpB,CAAC;EACD,OAAOC,MAAM;AACjB,CAAC,CAAC,CAAE;AACJ,eAAeA,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}