{"ast":null,"code":"/*import { ref, onMounted } from 'vue';\r\nimport Footer from '../components/Footer.vue';\r\nimport axios from 'axios';\r\nimport qs from 'qs';\r\nexport default {\r\n  name: 'OrderList',\r\n  components: {\r\n    Footer,\r\n  },\r\n  setup() {\r\n    const orderArr = ref([]);\r\n    const user = ref({});\r\n\r\n    onMounted(async () => {\r\n      user.value = JSON.parse(sessionStorage.getItem('user'));\r\n\r\n      try {\r\n        const response = axios.post(\r\n          'OrdersController/listOrdersByUserId',\r\n          qs.stringify({\r\n            userId: user.value.userId,\r\n          })\r\n        );\r\n\r\n        let result = response.data;\r\n        for (let orders of result) {\r\n          orders.isShowDetailet = false;\r\n        }\r\n        orderArr.value = result;\r\n        console.log(orderArr.value);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    });\r\n\r\n    const detailetShow = (orders) => {\r\n      orders.isShowDetailet = !orders.isShowDetailet;\r\n    };\r\n\r\n    return {\r\n      orderArr,\r\n      user,\r\n      detailetShow,\r\n    };\r\n  }\r\n};*/\nimport { ref, onMounted } from 'vue';\nimport Footer from '../components/Footer.vue';\nimport axios from 'axios';\nimport qs from 'qs';\nimport { getSessionStorage } from '../common.js';\nexport default {\n  name: 'OrderList',\n  components: {\n    Footer\n  },\n  setup() {\n    const orderArr = ref([]);\n    const user = ref(getSessionStorage('user'));\n    const isDataLoaded = ref(false);\n    onMounted(() => {\n      axios.post('/OrdersController/listOrdersByUserId', qs.stringify({\n        userId: user.value.userId\n      })).then(response => {\n        let result = response.data;\n        for (let orders of result) {\n          orders.isShowDetailet = false;\n        }\n        orderArr.value = response.data;\n        isDataLoaded.value = true;\n        console.log(11);\n        console.log(orderArr.value);\n      }).catch(error => {\n        console.error(error);\n        console.log(1);\n      });\n    });\n    const detailetShow = async orders => {\n      orders.isShowDetailet = !orders.isShowDetailet;\n    };\n    return {\n      orderArr,\n      user,\n      isDataLoaded,\n      detailetShow\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","Footer","axios","qs","getSessionStorage","name","components","setup","orderArr","user","isDataLoaded","post","stringify","userId","value","then","response","result","data","orders","isShowDetailet","console","log","catch","error","detailetShow"],"sources":["F:\\myvue1\\elmclient\\elmclient\\src\\views\\OrderList.vue"],"sourcesContent":["<template>\r\n<div class=\"wrapper\">\n  <!-- header部分 -->\n  <header>\n    <p>我的订单</p>\n  </header>\n  <!-- 订单列表部分 -->\n  <h3>未支付订单信息：</h3>\n  <ul class=\"order\" v-if=\"isDataLoaded && orderArr.length > 0\">\r\n  <template v-for=\"item in orderArr\">\n    <li v-if=\"item &&item.orderState==0\">\n      <div class=\"order-info\">\n        <p>\n          {{item.business.businessName}}\n          <i class=\"fa fa-caret-down\" @click=\"detailetShow(item)\"></i>\n        </p>\n        <div class=\"order-info-right\">\n          <p>&#165;{{item.orderTotal}}</p>\n          <div class=\"order-info-right-icon\">去支付</div>\n        </div>\n      </div>\n      <ul class=\"order-detailet\" v-show=\"item.isShowDetailet\">\n        <li v-for=\"odItem in item.list\">\n          <p>{{odItem.food.foodName}} x {{odItem.quantity}}</p>\n          <p>&#165;{{odItem.food.foodPrice*odItem.quantity}}</p>\n        </li>\n        <li>\n          <p>配送费</p>\n          <p>&#165;{{item.business.deliveryPrice}}</p>\n        </li>\n      </ul>\n    </li>\r\n\t</template>\n  </ul>\n  <h3>已支付订单信息：</h3>\n  <ul class=\"order\" v-if=\"orderArr.length > 0\">\n    <li v-for=\"item in orderArr\" v-if=\"item &&item.orderState==1\">\n      <div class=\"order-info\">\n        <p>\n          {{item.business.businessName}}\n          <i class=\"fa fa-caret-down\" @click=\"detailetShow(item)\"></i>\n        </p>\n        <div class=\"order-info-right\">\n          <p>&#165;{{item.orderTotal}}</p>\n        </div>\n      </div>\n      <ul class=\"order-detailet\" v-show=\"item.isShowDetailet\">\n        <li v-for=\"odItem in item.list\">\n          <p>{{odItem.food.foodName}} x {{odItem.quantity}}</p>\n          <p>&#165;{{odItem.food.foodPrice*odItem.quantity}}</p>\n        </li>\n        <li>\n          <p>配送费</p>\n          <p>&#165;{{item.business.deliveryPrice}}</p>\n        </li>\n      </ul>\n    </li>\n  </ul>\n  <!-- 底部菜单部分 -->\n  <Footer></Footer>\n</div>\r\n</template>\r\n\r\n<script>\r\n\t/*import { ref, onMounted } from 'vue';\r\n\timport Footer from '../components/Footer.vue';\r\n\timport axios from 'axios';\r\n\timport qs from 'qs';\r\n\texport default {\r\n\t  name: 'OrderList',\r\n\t  components: {\r\n\t    Footer,\r\n\t  },\r\n\t  setup() {\r\n\t    const orderArr = ref([]);\r\n\t    const user = ref({});\r\n\t\r\n\t    onMounted(async () => {\r\n\t      user.value = JSON.parse(sessionStorage.getItem('user'));\r\n\t\r\n\t      try {\r\n\t        const response = axios.post(\r\n\t          'OrdersController/listOrdersByUserId',\r\n\t          qs.stringify({\r\n\t            userId: user.value.userId,\r\n\t          })\r\n\t        );\r\n\t\r\n\t        let result = response.data;\r\n\t        for (let orders of result) {\r\n\t          orders.isShowDetailet = false;\r\n\t        }\r\n\t        orderArr.value = result;\r\n\t        console.log(orderArr.value);\r\n\t      } catch (error) {\r\n\t        console.error(error);\r\n\t      }\r\n\t    });\r\n\t\r\n\t    const detailetShow = (orders) => {\r\n\t      orders.isShowDetailet = !orders.isShowDetailet;\r\n\t    };\r\n\t\r\n\t    return {\r\n\t      orderArr,\r\n\t      user,\r\n\t      detailetShow,\r\n\t    };\r\n\t  }\r\n\t};*/\r\n\timport {\r\n\t\t\tref,\r\n\t\t\tonMounted\r\n\t\t} from 'vue';\r\n\t\timport Footer from '../components/Footer.vue';\r\n\t\timport axios from 'axios';\r\n\t\timport qs from 'qs';\r\n\t\timport {\r\n\t\t\tgetSessionStorage\r\n\t\t} from '../common.js';\r\n\t\texport default {\r\n\t\t\tname: 'OrderList',\r\n\t\t\tcomponents: {\r\n\t\t\t\tFooter\r\n\t\t\t},\r\n\t\t\tsetup() {\r\n\t\t\t\tconst orderArr = ref([]);\r\n\t\t\t\tconst user = ref(getSessionStorage('user'));\r\n\t\t\t\tconst isDataLoaded = ref(false);\r\n\t\t\t\tonMounted(() => {\r\n\t\t\t\t\taxios\r\n\t\t\t\t\t\t.post('/OrdersController/listOrdersByUserId', qs.stringify({\r\n\t\t\t\t\t\t\tuserId: user.value.userId\r\n\t\t\t\t\t\t})).then(response => {\r\n\t\r\n\t\t\t\t\t\t\tlet result = response.data;\r\n\t\t\t\t\t\t\tfor (let orders of result) {\r\n\t\t\t\t\t\t\t\torders.isShowDetailet = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\torderArr.value = response.data;\r\n\t\t\t\t\t\t\t isDataLoaded.value = true; \r\n\t\t\t\t\t\t\tconsole.log(11);\r\n\t\t\t\t\t\t\tconsole.log(orderArr.value);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t\t\tconsole.log(1);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tconst detailetShow = async (orders) => {\r\n\t\t\t\t\torders.isShowDetailet = !orders.isShowDetailet;\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\torderArr,\r\n\t\t\t\t\tuser,\r\n\t\t\t\t\tisDataLoaded,\r\n\t\t\t\t\tdetailetShow\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n</script>\r\n<style scoped>\r\n\t/****************** 总容器 ******************/\r\n\t.wrapper {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/****************** header部分 ******************/\r\n\t.wrapper header {\r\n\t\twidth: 100%;\r\n\t\theight: 12vw;\r\n\t\tbackground-color: #0097FF;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.8vw;\r\n\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tz-index: 1000;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/****************** 历史订单列表部分 ******************/\r\n\t.wrapper h3 {\r\n\t\tmargin-top: 12vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 4vw;\r\n\t\tfont-size: 4vw;\r\n\t\tfont-weight: 300;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.wrapper .order {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.wrapper .order li {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.wrapper .order li .order-info {\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 2vw 4vw;\r\n\t\tfont-size: 4vw;\r\n\t\tcolor: #666;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .order li .order-info .order-info-right {\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.wrapper .order li .order-info .order-info-right .order-info-right-icon {\r\n\t\tbackground-color: #f90;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 3px;\r\n\t\tuser-select: none;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.wrapper li .order-detailet {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.wrapper li .order-detailet li {\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 1vw 4vw;\r\n\t\tcolor: #666;\r\n\t\tfont-size: 3vw;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/****************** 底部菜单部分 ******************/\r\n</style>"],"mappings":"AAgEC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,SACEA,GAAG,EACHC,SAAQ,QACF,KAAK;AACZ,OAAOC,MAAK,MAAO,0BAA0B;AAC7C,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,EAAC,MAAO,IAAI;AACnB,SACCC,iBAAgB,QACV,cAAc;AACrB,eAAe;EACdC,IAAI,EAAE,WAAW;EACjBC,UAAU,EAAE;IACXL;EACD,CAAC;EACDM,KAAKA,CAAA,EAAG;IACP,MAAMC,QAAO,GAAIT,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMU,IAAG,GAAIV,GAAG,CAACK,iBAAiB,CAAC,MAAM,CAAC,CAAC;IAC3C,MAAMM,YAAW,GAAIX,GAAG,CAAC,KAAK,CAAC;IAC/BC,SAAS,CAAC,MAAM;MACfE,KAAI,CACFS,IAAI,CAAC,sCAAsC,EAAER,EAAE,CAACS,SAAS,CAAC;QAC1DC,MAAM,EAAEJ,IAAI,CAACK,KAAK,CAACD;MACpB,CAAC,CAAC,CAAC,CAACE,IAAI,CAACC,QAAO,IAAK;QAEpB,IAAIC,MAAK,GAAID,QAAQ,CAACE,IAAI;QAC1B,KAAK,IAAIC,MAAK,IAAKF,MAAM,EAAE;UAC1BE,MAAM,CAACC,cAAa,GAAI,KAAK;QAC9B;QACAZ,QAAQ,CAACM,KAAI,GAAIE,QAAQ,CAACE,IAAI;QAC7BR,YAAY,CAACI,KAAI,GAAI,IAAI;QAC1BO,OAAO,CAACC,GAAG,CAAC,EAAE,CAAC;QACfD,OAAO,CAACC,GAAG,CAACd,QAAQ,CAACM,KAAK,CAAC;MAC5B,CAAC,EACAS,KAAK,CAACC,KAAI,IAAK;QACfH,OAAO,CAACG,KAAK,CAACA,KAAK,CAAC;QACpBH,OAAO,CAACC,GAAG,CAAC,CAAC,CAAC;MACf,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,MAAMG,YAAW,GAAI,MAAON,MAAM,IAAK;MACtCA,MAAM,CAACC,cAAa,GAAI,CAACD,MAAM,CAACC,cAAc;IAC/C,CAAC;IAED,OAAO;MACNZ,QAAQ;MACRC,IAAI;MACJC,YAAY;MACZe;IACD,CAAC;EACF;AACD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}