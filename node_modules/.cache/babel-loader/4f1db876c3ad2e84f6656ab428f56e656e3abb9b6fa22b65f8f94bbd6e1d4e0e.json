{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport axios from 'axios';\nimport qs from 'qs';\nimport { useRouter } from 'vue-router';\nimport Footer from '../components/Footer.vue';\nexport default {\n  name: 'Login',\n  components: {\n    Footer\n  },\n  setup() {\n    const router = useRouter();\n    const userId = ref('');\n    const password = ref('');\n    const login = () => {\n      if (userId.value == '') {\n        alert('手机号码不能为空！');\n        return;\n      }\n      if (password.value == '') {\n        alert('密码不能为空！');\n        return;\n      }\n\n      // 登录请求\n      axios.post('UserController/getUserByIdByPass', qs.stringify({\n        userId: userId.value,\n        password: password.value\n      })).then(response => {\n        const user = response.data;\n        if (user == null) {\n          alert('用户名或密码不正确！');\n        } else {\n          // sessionstorage有容量限制，为了防止数据溢出，所以不将userImg数据放入session中\n          user.userImg = '';\n\n          // 设置用户信息到 sessionStorage\n          sessionStorage.setItem('user', JSON.stringify(user));\n          router.go(-1); // 页面回退\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n      const register = () => {\n        router.push({\n          path: 'register'\n        });\n      };\n      return {\n        userId,\n        password,\n        login,\n        register\n      };\n    };\n  }\n};","map":{"version":3,"names":["ref","axios","qs","useRouter","Footer","name","components","setup","router","userId","password","login","value","alert","post","stringify","then","response","user","data","userImg","sessionStorage","setItem","JSON","go","catch","error","console","register","push","path"],"sources":["F:\\myvue1\\elmclient\\elmclient\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n\t<div class=\"wrapper\">\r\n\r\n\t\t<!--header部分-->\r\n\t\t<header>\r\n\t\t\t<p>用户登录</p>\r\n\t\t</header>\r\n\r\n\t\t<!--登陆表单部分-->\r\n\t\t<ul class=\"form-box\">\r\n\t\t\t<li>\r\n\t\t\t\t<div class=\"title\">\r\n\t\t\t\t\t手机号码：\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"content\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"userId\" placeholder=\"手机号码\">\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<div class=\"title\">\r\n\t\t\t\t\t密码：\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"content\">\r\n\t\t\t\t\t<input type=\"password\" v-model=\"password\" placeholder=\"密码\">\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\r\n\t\t<div class=\"button-login\">\r\n\t\t\t<button @click=\"login\">登录</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"button-register\">\r\n\t\t\t<button @click=\"register\">去注册</button>\r\n\t\t</div>\r\n\r\n\t\t<!-- 底部菜单部分 -->\r\n\t\t<Footer></Footer>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tref\r\n\t} from 'vue';\r\n\timport axios from 'axios';\r\n\timport qs from 'qs';\r\n\timport {\r\n\t\tuseRouter\r\n\t} from 'vue-router';\r\n\timport Footer from '../components/Footer.vue';\r\n\r\n\texport default {\r\n\t\tname: 'Login',\r\n\t\tcomponents: {\r\n\t\t\tFooter\r\n\t\t},\r\n\t\tsetup() {\r\n\t\t\tconst router = useRouter();\r\n\t\t\tconst userId = ref('');\r\n\t\t\tconst password = ref('');\r\n\r\n\t\t\tconst login = () => {\r\n\t\t\t\tif (userId.value == '') {\r\n\t\t\t\t\talert('手机号码不能为空！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (password.value == '') {\r\n\t\t\t\t\talert('密码不能为空！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 登录请求\r\n\t\t\t\taxios.post('UserController/getUserByIdByPass', qs.stringify({\r\n\t\t\t\t\tuserId: userId.value,\r\n\t\t\t\t\tpassword: password.value\r\n\t\t\t\t})).then(response => {\r\n\t\t\t\t\tconst user = response.data;\r\n\t\t\t\t\tif (user == null) {\r\n\t\t\t\t\t\talert('用户名或密码不正确！');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// sessionstorage有容量限制，为了防止数据溢出，所以不将userImg数据放入session中\r\n\t\t\t\t\t\tuser.userImg = '';\r\n\r\n\t\t\t\t\t\t// 设置用户信息到 sessionStorage\r\n\t\t\t\t\t\tsessionStorage.setItem('user', JSON.stringify(user));\r\n\t\t\t\t\t\trouter.go(-1); // 页面回退\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t\t\tconst register = () => {\r\n\t\t\t\t      router.push({ path: 'register' });\r\n\t\t\t};\r\n\r\n\t\t\treturn {\r\n\t\t\t\tuserId,\r\n\t\t\t\tpassword,\r\n\t\t\t\tlogin,\r\n\t\t\t\tregister\r\n\t\t\t};\r\n\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t/****************** 总容器 ******************/\r\n\t.wrapper {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/****************** header部分 ******************/\r\n\t.wrapper header {\r\n\t\twidth: 100%;\r\n\t\theight: 12vw;\r\n\t\tbackground-color: #0097FF;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.8vw;\r\n\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tz-index: 1000;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/****************** 用户表单部分 ******************/\r\n\t.wrapper .form-box {\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 12vw;\r\n\t}\r\n\r\n\t.wrapper .form-box li {\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 4vw 3vw 0 3vw;\r\n\t\t/*上 右 下 左*/\r\n\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .form-box li .title {\r\n\t\tflex: 0 0 18vw;\r\n\t\t/*标题部分不缩小&放大，固定18vw*/\r\n\t\tfont-size: 3vw;\r\n\t\tfont-weight: 700;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.wrapper .form-box li .content {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.wrapper .form-box li input {\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t\t/*去掉外轮廓线*/\r\n\t\twidth: 100%;\r\n\t\theight: 4vw;\r\n\t\tfont-size: 3vw;\r\n\t}\r\n\r\n\t.wrapper .button-login {\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 4vw 3vw 0 3vw;\r\n\t}\r\n\r\n\t.wrapper .button-login button {\r\n\t\twidth: 100%;\r\n\t\theight: 10vw;\r\n\t\tfont-size: 3.8vw;\r\n\t\tfont-weight: 700;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: #38CA73;\r\n\t\tborder-radius: 4px;\r\n\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t}\r\n\r\n\t.wrapper .button-register {\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 4vw 3vw 0 3vw;\r\n\t}\r\n\r\n\t.wrapper .button-register button {\r\n\t\twidth: 100%;\r\n\t\theight: 10vw;\r\n\t\tfont-size: 3.8vw;\r\n\t\tfont-weight: 700;\r\n\t\tcolor: #666;\r\n\t\tbackground-color: #EEE;\r\n\t\tborder-radius: 4px;\r\n\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t\tborder: solid 1px #DDD;\r\n\t}\r\n\r\n\t/****************** 底部菜单部分 ******************/\r\n\t.wrapper .footer {\r\n\t\twidth: 100%;\r\n\t\theight: 14vw;\r\n\t\tborder-top: solid 1px #DDD;\r\n\t\tbackground-color: #fff;\r\n\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .footer li {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\r\n\t\tcolor: #999;\r\n\t\tuser-select: none;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.wrapper .footer li p {\r\n\t\tfont-size: 2.8vw;\r\n\t}\r\n\r\n\t.wrapper .footer li i {\r\n\t\tfont-size: 5vw;\r\n\t}\r\n</style>"],"mappings":";AA0CC,SACCA,GAAE,QACI,KAAK;AACZ,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,EAAC,MAAO,IAAI;AACnB,SACCC,SAAQ,QACF,YAAY;AACnB,OAAOC,MAAK,MAAO,0BAA0B;AAE7C,eAAe;EACdC,IAAI,EAAE,OAAO;EACbC,UAAU,EAAE;IACXF;EACD,CAAC;EACDG,KAAKA,CAAA,EAAG;IACP,MAAMC,MAAK,GAAIL,SAAS,CAAC,CAAC;IAC1B,MAAMM,MAAK,GAAIT,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMU,QAAO,GAAIV,GAAG,CAAC,EAAE,CAAC;IAExB,MAAMW,KAAI,GAAIA,CAAA,KAAM;MACnB,IAAIF,MAAM,CAACG,KAAI,IAAK,EAAE,EAAE;QACvBC,KAAK,CAAC,WAAW,CAAC;QAClB;MACD;MACA,IAAIH,QAAQ,CAACE,KAAI,IAAK,EAAE,EAAE;QACzBC,KAAK,CAAC,SAAS,CAAC;QAChB;MACD;;MAEA;MACAZ,KAAK,CAACa,IAAI,CAAC,kCAAkC,EAAEZ,EAAE,CAACa,SAAS,CAAC;QAC3DN,MAAM,EAAEA,MAAM,CAACG,KAAK;QACpBF,QAAQ,EAAEA,QAAQ,CAACE;MACpB,CAAC,CAAC,CAAC,CAACI,IAAI,CAACC,QAAO,IAAK;QACpB,MAAMC,IAAG,GAAID,QAAQ,CAACE,IAAI;QAC1B,IAAID,IAAG,IAAK,IAAI,EAAE;UACjBL,KAAK,CAAC,YAAY,CAAC;QACpB,OAAO;UACN;UACAK,IAAI,CAACE,OAAM,GAAI,EAAE;;UAEjB;UACAC,cAAc,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACR,SAAS,CAACG,IAAI,CAAC,CAAC;UACpDV,MAAM,CAACgB,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE;QAChB;MACD,CAAC,CAAC,CAACC,KAAK,CAACC,KAAI,IAAK;QACjBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACrB,CAAC,CAAC;MACF,MAAME,QAAO,GAAIA,CAAA,KAAM;QACjBpB,MAAM,CAACqB,IAAI,CAAC;UAAEC,IAAI,EAAE;QAAW,CAAC,CAAC;MACxC,CAAC;MAED,OAAO;QACNrB,MAAM;QACNC,QAAQ;QACRC,KAAK;QACLiB;MACD,CAAC;IACF;EACA;AACD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}