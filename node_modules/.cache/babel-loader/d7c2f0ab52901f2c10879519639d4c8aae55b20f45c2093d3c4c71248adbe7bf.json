{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, onBeforeUnmount } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport axios from 'axios';\nimport qs from 'qs';\nimport Footer from '../components/Footer.vue';\nexport default {\n  name: 'Payment',\n  components: {\n    Footer\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const orderId = ref(null);\n    const orders = ref(null);\n    const isShowDetailet = ref(false);\n    const getOrdersById = () => {\n      axios.post('OrdersController/getOrdersById', qs.stringify({\n        orderId: orderId.value\n      })).then(response => {\n        orders.value = response.data;\n        console.log(orders.value);\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n    const detailetShow = () => {\n      isShowDetailet.value = !isShowDetailet.value;\n    };\n    onMounted(() => {\n      orderId.value = route.query.orderId;\n      getOrdersById();\n    });\n    onBeforeUnmount(() => {\n      window.onpopstate = null;\n    });\n\n    // 在线支付组件路由跳转时，禁止返回订单确认组件\n    history.pushState(null, null, document.URL);\n    window.onpopstate = () => {\n      router.push({\n        path: '/index'\n      });\n    };\n    return {\n      orderId,\n      orders,\n      isShowDetailet,\n      getOrdersById,\n      detailetShow\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","onBeforeUnmount","useRoute","useRouter","axios","qs","Footer","name","components","setup","route","router","orderId","orders","isShowDetailet","getOrdersById","post","stringify","value","then","response","data","console","log","catch","error","detailetShow","query","window","onpopstate","history","pushState","document","URL","push","path"],"sources":["F:\\myvue1\\elmclient\\elmclient\\src\\views\\Payment.vue"],"sourcesContent":["<template>\r\n\t<div class=\"wrapper\">\r\n\r\n\t\t<!--header部分-->\r\n\t\t<header>\r\n\t\t\t<p>在线支付</p>\r\n\t\t</header>\r\n\r\n\t\t<!--订单信息部分-->\r\n\t\t<h3>订单信息：</h3>\r\n\t\t<div class=\"order-info\" v-if=\"orders\">\r\n\t\t\t<p>\r\n\t\t\t    {{orders.business.businessName}}\n                <i class=\"fa fa-caret-down\" @click=\"detailetShow\"></i>\r\n\t\t\t</p>\r\n\t\t\t<p>&#165;{{orders.orderTotal}}</p>\r\n\t\t</div>\r\n\r\n\t\t<!--订单明细部分-->\r\n\t\t<ul class=\"order-detailet\" v-show=\"isShowDetailet\"  v-if=\"orders\">\r\n\t\t\t<li v-for=\"item in orders.list\">\r\n\t\t\t\t<p>{{item.food.foodName}} x {{item.quantity}}</p>\r\n\t\t\t\t<p>&#165;{{item.food.foodPrice*item.quantity}}</p>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<p>配送费</p>\r\n\t\t\t\t<p>&#165;{{orders.business.deliveryPrice}}</p>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\r\n\t\t<!--支付方式部分-->\r\n\t\t<ul class=\"payment-type\">\r\n\t\t\t<li>\r\n\t\t\t\t<img src=\"../assets/alipay.png\">\r\n\t\t\t\t<i class=\"fa fa-check-circle\"></i>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<img src=\"../assets/wechat.png\">\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t\t<div class=\"payment-button\">\r\n\t\t\t<button>确认支付</button>\r\n\t\t</div>\r\n\r\n\t\t<!--底部菜单部分-->\r\n\t\t<Footer></Footer>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tref,\r\n\t\tonMounted,\r\n\t\tonBeforeUnmount\r\n\t} from 'vue';\r\n\timport {\r\n\t\tuseRoute,\r\n\t\tuseRouter\r\n\t} from 'vue-router';\r\n\timport axios from 'axios';\r\n\timport qs from 'qs';\r\n\timport Footer from '../components/Footer.vue';\r\n\r\n\texport default {\r\n\t\tname: 'Payment',\r\n\t\tcomponents: {\r\n\t\t\tFooter\r\n\t\t},\r\n\t\tsetup() {\r\n\t\t\tconst route = useRoute();\r\n\t\t\tconst router = useRouter();\r\n\t\t\tconst orderId = ref(null);\r\n\t\t\tconst orders = ref(null);\r\n\t\t\tconst isShowDetailet = ref(false);\r\n\r\n\t\t\tconst getOrdersById = () => {\r\n\t\t\t\taxios\r\n\t\t\t\t\t.post('OrdersController/getOrdersById', qs.stringify({\r\n\t\t\t\t\t\torderId: orderId.value\r\n\t\t\t\t\t}))\r\n\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\torders.value = response.data;\r\n\t\t\t\t\t\tconsole.log(orders.value);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tconst detailetShow = () => {\r\n\t\t\t\tisShowDetailet.value = !isShowDetailet.value;\r\n\t\t\t}\r\n\r\n\t\t\tonMounted(() => {\r\n\t\t\t\torderId.value = route.query.orderId;\r\n\t\t\t\tgetOrdersById();\r\n\t\t\t});\r\n\r\n\t\t\tonBeforeUnmount(() => {\r\n\t\t\t\twindow.onpopstate = null;\r\n\t\t\t});\r\n\r\n\t\t\t// 在线支付组件路由跳转时，禁止返回订单确认组件\r\n\t\t\thistory.pushState(null, null, document.URL);\r\n\t\t\twindow.onpopstate = () => {\r\n\t\t\t\trouter.push({\r\n\t\t\t\t\tpath: '/index'\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\treturn {\r\n\t\t\t\torderId,\r\n\t\t\t\torders,\r\n\t\t\t\tisShowDetailet,\r\n\t\t\t\tgetOrdersById,\r\n\t\t\t\tdetailetShow\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/***总容器***/\r\n\t.wrapper {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/****header部分***/\r\n\t.wrapper header {\r\n\t\twidth: 100%;\r\n\t\theight: 12vw;\r\n\t\tbackground-color: #0097FF;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.8vw;\r\n\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tz-index: 1000;\r\n\t\t/*层次提升*/\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/***订单信息部分***/\r\n\t.wrapper h3 {\r\n\t\tmargin-top: 12vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 4vw 4vw 0;\r\n\r\n\t\tfont-size: 4vw;\r\n\t\tcolor: #999;\r\n\t\tfont-weight: 300;\r\n\t}\r\n\r\n\t.wrapper .order-info {\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 4vw;\r\n\t\tfont-size: 4vw;\r\n\t\tcolor: #666;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .order-info p:last-child {\r\n\t\tcolor: orangered;\r\n\t}\r\n\r\n\t/***订单明细部分***/\r\n\t.wrapper .order-detailet {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.wrapper .order-detailet li {\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 1vw 4vw;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .order-detailet li p {\r\n\t\tfont-size: 3vw;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t/***支付方式部分***/\r\n\t.wrapper .payment-type {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.wrapper .payment-type li {\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 4vw;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .payment-type li img {\r\n\t\twidth: 33vw;\r\n\t\theight: 8.9vw;\r\n\t}\r\n\r\n\t.wrapper .payment-type li .fa-check-circle {\r\n\t\tfont-size: 5vw;\r\n\t\tcolor: #38CA73;\r\n\t}\r\n\r\n\t.wrapper .payment-button {\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 4vw;\r\n\t}\r\n\r\n\t.wrapper .payment-button button {\r\n\t\twidth: 100%;\r\n\t\theight: 10vw;\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t\t/*外轮廓线，获得交点时出现*/\r\n\t\tborder-radius: 4px;\r\n\t\tbackground-color: #38CA73;\r\n\t\tcolor: #fff;\r\n\t}\r\n</style>"],"mappings":";AAkDC,SACCA,GAAG,EACHC,SAAS,EACTC,eAAc,QACR,KAAK;AACZ,SACCC,QAAQ,EACRC,SAAQ,QACF,YAAY;AACnB,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,EAAC,MAAO,IAAI;AACnB,OAAOC,MAAK,MAAO,0BAA0B;AAE7C,eAAe;EACdC,IAAI,EAAE,SAAS;EACfC,UAAU,EAAE;IACXF;EACD,CAAC;EACDG,KAAKA,CAAA,EAAG;IACP,MAAMC,KAAI,GAAIR,QAAQ,CAAC,CAAC;IACxB,MAAMS,MAAK,GAAIR,SAAS,CAAC,CAAC;IAC1B,MAAMS,OAAM,GAAIb,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMc,MAAK,GAAId,GAAG,CAAC,IAAI,CAAC;IACxB,MAAMe,cAAa,GAAIf,GAAG,CAAC,KAAK,CAAC;IAEjC,MAAMgB,aAAY,GAAIA,CAAA,KAAM;MAC3BX,KAAI,CACFY,IAAI,CAAC,gCAAgC,EAAEX,EAAE,CAACY,SAAS,CAAC;QACpDL,OAAO,EAAEA,OAAO,CAACM;MAClB,CAAC,CAAC,EACDC,IAAI,CAACC,QAAO,IAAK;QACjBP,MAAM,CAACK,KAAI,GAAIE,QAAQ,CAACC,IAAI;QAC5BC,OAAO,CAACC,GAAG,CAACV,MAAM,CAACK,KAAK,CAAC;MAC1B,CAAC,EACAM,KAAK,CAACC,KAAI,IAAK;QACfH,OAAO,CAACG,KAAK,CAACA,KAAK,CAAC;MACrB,CAAC,CAAC;IACJ,CAAC;IAED,MAAMC,YAAW,GAAIA,CAAA,KAAM;MAC1BZ,cAAc,CAACI,KAAI,GAAI,CAACJ,cAAc,CAACI,KAAK;IAC7C;IAEAlB,SAAS,CAAC,MAAM;MACfY,OAAO,CAACM,KAAI,GAAIR,KAAK,CAACiB,KAAK,CAACf,OAAO;MACnCG,aAAa,CAAC,CAAC;IAChB,CAAC,CAAC;IAEFd,eAAe,CAAC,MAAM;MACrB2B,MAAM,CAACC,UAAS,GAAI,IAAI;IACzB,CAAC,CAAC;;IAEF;IACAC,OAAO,CAACC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAEC,QAAQ,CAACC,GAAG,CAAC;IAC3CL,MAAM,CAACC,UAAS,GAAI,MAAM;MACzBlB,MAAM,CAACuB,IAAI,CAAC;QACXC,IAAI,EAAE;MACP,CAAC,CAAC;IACH,CAAC;IAED,OAAO;MACNvB,OAAO;MACPC,MAAM;MACNC,cAAc;MACdC,aAAa;MACbW;IACD;EACD;AAED"},"metadata":{},"sourceType":"module","externalDependencies":[]}